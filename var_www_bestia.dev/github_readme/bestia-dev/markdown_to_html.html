<!DOCTYPE html>
<html>

<head>
    <title>markdown_to_html</title>
    <meta http-equiv="Content-type" content="text/html;charset=utf-8" />
    <meta name="Description" content="Render markdown to html client-side in the browser with WASM.">
    <meta name="author" content="https://github.com/bestia-dev">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/bestia01.css">
    <script>
        /* Toggle between adding and removing the "responsive" class to navbar when the user clicks on the hamburger */
        function toggle_responsive_navbar() {
            var x = document.getElementById("navbar");
            if (x.className.includes(" responsive")) {
                x.className = x.className.replace(" responsive", "");
            } else {
                x.className += " responsive";
            }
        }
    </script>
</head>

<body>
    <div class="fixed_header">
        <div id="navbar">
            <a id="navbar_brand" href="https://bestia.dev">
                <img src="bestia_icon.png" alt="Bestia development" title="bestia.dev" />
                <span id="navbar_title"> Bestia dev</span>
            </a>
            <a id="navbar_hamburger" href="javascript:void(0);" onclick="toggle_responsive_navbar()">☰ </a>
            <div id="navbar_topics">
                <a href="/index.html#home" onclick="toggle_responsive_navbar()">Home </a>
                <a href="/index.html#tutorials" onclick="toggle_responsive_navbar()">Tutorials</a>
                <a href="/index.html#games" onclick="toggle_responsive_navbar()">Games</a>
                <a href="/index.html#productivity" onclick="toggle_responsive_navbar()">Productivity</a>
                <a href="/index.html#contact" onclick="toggle_responsive_navbar()">Contact</a>
            </div>
        </div>
    </div>
    <div>&nbsp;</div> 
    <div class="small">This is a copy of the Github readme.<br/>
    Find the original on <a href="https://github.com/bestia-dev/markdown_to_html">https://github.com/bestia-dev/markdown_to_html</a></div>

<article class="markdown-body entry-content container-lg" itemprop="text">
<div class="markdown-heading" dir="auto"><h1 tabindex="-1" class="heading-element" dir="auto">markdown_to_html</h1><a id="user-content-markdown_to_html" class="anchor" aria-label="Permalink: markdown_to_html" href="#markdown_to_html"></a></div>
<p dir="auto"><strong>Render markdown to html client-side in the browser with WASM.</strong><br>
<em><strong>version: 2023 date: 2023-11-17 author: <a href="https://bestia.dev" rel="nofollow">bestia.dev</a> repository: <a href="https://github.com/bestia-dev/markdown_to_html">GitHub</a></strong></em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e8100395d149fab3d02c3ee4672d2cc5d833bf4ab9044e6c57f47c54baf4d1ba/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d61696e7461696e65642d677265656e"><img src="https://img.shields.io/badge/maintained-green" alt="maintained" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/3d28e085cfc1f662a567e40863593879fb9896391cde406b9ff5775277affe41/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f72656164795f666f725f7573652d677265656e"><img src="https://img.shields.io/badge/ready_for_use-green" alt="ready_for_use" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c273959e453b2eacb9b7719663be397499b129c79eb13180305a069b3c2f5e51/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7475746f7269616c2d79656c6c6f77"><img src="https://img.shields.io/badge/tutorial-yellow" alt="tutorial" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/6581c31c16c1b13ddc2efb92e2ad69a93ddc4a92fd871ff15d401c4c6c9155a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9496de1273e6371896e2088ab2d569a5edc2d69ea86d86b17d120009e538e2f5/68747470733a2f2f6265737469612e6465762f776562706167655f6869745f636f756e7465722f6765745f7376675f696d6167652f323031313533383430312e737667"><img src="https://bestia.dev/webpage_hit_counter/get_svg_image/2011538401.svg" alt="markdown_to_html" style="max-width: 100%;"></a></p>
<p dir="auto">Hashtags: #tutorial #markdown #wasm<br>
My projects on GitHub are more like a tutorial than a finished product: <a href="https://github.com/bestia-dev/tutorials_rust_wasm">bestia-dev tutorials</a>.</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Try it</h2><a id="user-content-try-it" class="anchor" aria-label="Permalink: Try it" href="#try-it"></a></div>
<p dir="auto"><a href="https://bestia.dev/markdown_to_html_example" rel="nofollow">https://bestia.dev/markdown_to_html_example</a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Markdown</h2><a id="user-content-markdown" class="anchor" aria-label="Permalink: Markdown" href="#markdown"></a></div>
<p dir="auto">Markdown is great! It is as easy as plain text but renders in a beautiful style that I could never achieve on my own in some Rich text or HTML.<br>
The syntax is super easy and it is human readable in both plain text and HTML format. <a href="https://www.markdownguide.org/basic-syntax/" rel="nofollow">https://www.markdownguide.org/basic-syntax/</a><br>
In VSCode and many other editors, I can write Markdown files, and insert images and links. Then there is a Preview panel to watch how it renders.</p>
<p dir="auto">Usually, the markdown syntax is rendered to HTML. Many libraries do that.<br>
I chose <a href="https://github.com/rsms/markdown-wasm">https://github.com/rsms/markdown-wasm</a> because it can be used inside a browser on the client side.</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Publish to Web</h2><a id="user-content-publish-to-web" class="anchor" aria-label="Permalink: Publish to Web" href="#publish-to-web"></a></div>
<p dir="auto">Now I want to publish these markdown files to the Web. I have a small web server. I copy all the files there.<br>
No luck! Web browsers don't recognize and render markdown, just HTML.</p>
<p dir="auto">I could use a server-side filter for Nginx or write my own Rust web app, but that is overkill.<br>
I find it attractive to use Wasm in the browser to render the .md files on the fly.<br>
I found this library: <a href="https://github.com/rsms/markdown-wasm">https://github.com/rsms/markdown-wasm</a> written in Rust and compiled to wasm.<br>
With some glue files and JavaScript, it is easy to make it work.</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Files on the Web server</h2><a id="user-content-files-on-the-web-server" class="anchor" aria-label="Permalink: Files on the Web server" href="#files-on-the-web-server"></a></div>
<p dir="auto">For this to work I need a simple Web server that returns files, nothing more. No dynamic web app or anything exotic.<br>
It will not work without a Web server on the local disk, because <code>wasm</code> files must be fetched from a Web server because of security.<br>
Let's start with <code>index.html</code>. It will just redirect to the HTML file with JavaScript, adding the first_page.md file as a parameter.</p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&lt;script&gt;
window.location.replace(&quot;mdtohtml.html?first_page.md&quot;);
&lt;/script&gt;"><pre><span class="pl-kos">&lt;</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
<span class="pl-smi">window</span><span class="pl-kos">.</span><span class="pl-c1">location</span><span class="pl-kos">.</span><span class="pl-en">replace</span><span class="pl-kos">(</span><span class="pl-s">"mdtohtml.html?first_page.md"</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span></pre></div>
<p dir="auto">The javascript program is all in the <code>mdtohtml.html</code>. There is some simple code to accept a URL parameter.<br>
I also regex replaced the links inside the markdown to work with the new indirection.<br>
For simplicity I don't bother with subfolders. All .md files must be in the same folder.<br>
And then we call the <code>markdown.parse()</code> method from the wasm module.<br>
<a href="https://github.com/rsms/markdown-wasm">https://github.com/rsms/markdown-wasm</a><br>
Sure we have to add some beautiful CSS that is similar to GitHub markdown.<br>
<a href="https://github.com/sindresorhus/github-markdown-css">https://github.com/sindresorhus/github-markdown-css</a></p>
<div class="highlight highlight-text-html-basic notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="&lt;!doctype html&gt;
&lt;html lang=&quot;en-US&quot;&gt;
&lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;github-markdown.css&quot;&gt;
    &lt;script src=&quot;markdown.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
        async function fetch_md_convert_to_html() {
            let params = window.location.search;
            if (params==''){
                params = &quot;?first_page.md&quot;;
                window.location.search=params;
            }
            let mdFile = params.substring(1);
            const response = await fetch(mdFile);
            let mdText = await response.text();
            mdText = mdText.replaceAll(/(\[.*\]\()(.*\.md\))/g, '$1mdtohtml.html?$2'); 
            document.body.innerHTML=markdown.parse(mdText);
        }
    &lt;/script&gt;
    &lt;style&gt;
        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }
        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;markdown-body&quot;&gt;
    &lt;script&gt;
        fetch_md_convert_to_html();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt; "><pre><span class="pl-c1">&lt;!doctype html<span class="pl-kos">&gt;</span></span>
<span class="pl-kos">&lt;</span><span class="pl-ent">html</span> <span class="pl-c1">lang</span>="<span class="pl-s">en-US</span>"<span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;</span><span class="pl-ent">head</span><span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">meta</span> <span class="pl-c1">http-equiv</span>="<span class="pl-s">Content-Type</span>" <span class="pl-c1">content</span>="<span class="pl-s">text/html; charset=utf-8</span>"<span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">meta</span> <span class="pl-c1">name</span>="<span class="pl-s">viewport</span>" <span class="pl-c1">content</span>="<span class="pl-s">width=device-width, initial-scale=1</span>"<span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">link</span> <span class="pl-c1">rel</span>="<span class="pl-s">stylesheet</span>" <span class="pl-c1">href</span>="<span class="pl-s">github-markdown.css</span>"<span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">script</span> <span class="pl-c1">src</span>="<span class="pl-s">markdown.js</span>"<span class="pl-kos">&gt;</span><span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
        <span class="pl-k">async</span> <span class="pl-k">function</span> <span class="pl-en">fetch_md_convert_to_html</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
            <span class="pl-k">let</span> <span class="pl-s1">params</span> <span class="pl-c1">=</span> <span class="pl-smi">window</span><span class="pl-kos">.</span><span class="pl-c1">location</span><span class="pl-kos">.</span><span class="pl-c1">search</span><span class="pl-kos">;</span>
            <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">params</span><span class="pl-c1">==</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">{</span>
                <span class="pl-s1">params</span> <span class="pl-c1">=</span> <span class="pl-s">"?first_page.md"</span><span class="pl-kos">;</span>
                <span class="pl-smi">window</span><span class="pl-kos">.</span><span class="pl-c1">location</span><span class="pl-kos">.</span><span class="pl-c1">search</span><span class="pl-c1">=</span><span class="pl-s1">params</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span>
            <span class="pl-k">let</span> <span class="pl-s1">mdFile</span> <span class="pl-c1">=</span> <span class="pl-s1">params</span><span class="pl-kos">.</span><span class="pl-en">substring</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-k">const</span> <span class="pl-s1">response</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">fetch</span><span class="pl-kos">(</span><span class="pl-s1">mdFile</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-k">let</span> <span class="pl-s1">mdText</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-s1">response</span><span class="pl-kos">.</span><span class="pl-en">text</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
            <span class="pl-s1">mdText</span> <span class="pl-c1">=</span> <span class="pl-s1">mdText</span><span class="pl-kos">.</span><span class="pl-en">replaceAll</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-kos">(</span><span class="pl-cce">\[</span>.<span class="pl-c1">*</span><span class="pl-cce">\]</span><span class="pl-cce">\(</span><span class="pl-kos">)</span><span class="pl-kos">(</span>.<span class="pl-c1">*</span><span class="pl-cce">\.</span><span class="pl-s">m</span><span class="pl-s">d</span><span class="pl-cce">\)</span><span class="pl-kos">)</span><span class="pl-c1">/</span>g</span><span class="pl-kos">,</span> <span class="pl-s">'$1mdtohtml.html?$2'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> 
            <span class="pl-smi">document</span><span class="pl-kos">.</span><span class="pl-c1">body</span><span class="pl-kos">.</span><span class="pl-c1">innerHTML</span><span class="pl-c1">=</span><span class="pl-s1">markdown</span><span class="pl-kos">.</span><span class="pl-en">parse</span><span class="pl-kos">(</span><span class="pl-s1">mdText</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">style</span><span class="pl-kos">&gt;</span>
        .<span class="pl-c1">markdown-body</span> {
            <span class="pl-c1">box-sizing</span><span class="pl-kos">:</span> border-box;
            <span class="pl-c1">min-width</span><span class="pl-kos">:</span> <span class="pl-c1">200<span class="pl-smi">px</span></span>;
            <span class="pl-c1">max-width</span><span class="pl-kos">:</span> <span class="pl-c1">980<span class="pl-smi">px</span></span>;
            <span class="pl-c1">margin</span><span class="pl-kos">:</span> <span class="pl-c1">0</span> auto;
            <span class="pl-c1">padding</span><span class="pl-kos">:</span> <span class="pl-c1">45<span class="pl-smi">px</span></span>;
        }
        <span class="pl-k">@media</span> (<span class="pl-c1">max-width</span><span class="pl-kos">:</span> <span class="pl-c1">767<span class="pl-smi">px</span></span>) {
            .<span class="pl-c1">markdown-body</span> {
                <span class="pl-c1">padding</span><span class="pl-kos">:</span> <span class="pl-c1">15<span class="pl-smi">px</span></span>;
            }
        }
    <span class="pl-kos">&lt;/</span><span class="pl-ent">style</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">head</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;</span><span class="pl-ent">body</span> <span class="pl-c1">class</span>="<span class="pl-s">markdown-body</span>"<span class="pl-kos">&gt;</span>
    <span class="pl-kos">&lt;</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
        <span class="pl-en">fetch_md_convert_to_html</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">&lt;/</span><span class="pl-ent">script</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">body</span><span class="pl-kos">&gt;</span>
<span class="pl-kos">&lt;/</span><span class="pl-ent">html</span><span class="pl-kos">&gt;</span> </pre></div>
<p dir="auto">We need to add the magic ingredients to the folder: <code>markdown.js</code>, <code>markdown.wasm</code>, <code>github-markdown.css</code></p>
<p dir="auto">and voila! It works.</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Open-source and free as a beer</h2><a id="user-content-open-source-and-free-as-a-beer" class="anchor" aria-label="Permalink: Open-source and free as a beer" href="#open-source-and-free-as-a-beer"></a></div>
<p dir="auto">My open-source projects are free as a beer (MIT license).<br>
I just love programming.<br>
But I need also to drink. If you find my projects and tutorials helpful, please buy me a beer by donating to my <a href="https://paypal.me/LucianoBestia" rel="nofollow">PayPal</a>.<br>
You know the price of a beer in your local bar ;-)<br>
So I can drink a free beer for your health :-)<br>
<a href="https://translate.google.com/?hl=en&amp;sl=sl&amp;tl=en&amp;text=Na%20zdravje&amp;op=translate" rel="nofollow">Na zdravje!</a> <a href="https://dictionary.cambridge.org/dictionary/italian-english/alla-salute" rel="nofollow">Alla salute!</a> <a href="https://dictionary.cambridge.org/dictionary/german-english/prost" rel="nofollow">Prost!</a> <a href="https://matadornetwork.com/nights/how-to-say-cheers-in-50-languages/" rel="nofollow">Nazdravlje!</a> 🍻</p>
<p dir="auto"><a href="https://bestia.dev" rel="nofollow">//bestia.dev</a><br>
<a href="https://github.com/bestia-dev">//github.com/bestia-dev</a><br>
<a href="https://bestiadev.substack.com" rel="nofollow">//bestiadev.substack.com</a><br>
<a href="https://youtube.com/@bestia-dev-tutorials" rel="nofollow">//youtube.com/@bestia-dev-tutorials</a></p>
</article>
</body>

</html>