<!DOCTYPE html>
<html>

<head>
    <title>QVS21</title>
    <meta http-equiv="Content-type" content="text/html;charset=utf-8" />
    <meta name="Description" content="Modern replacement for csv for the year 2021">
    <meta name="author" content="https://github.com/bestia-dev">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/bestia01.css">
    <script>
        /* Toggle between adding and removing the "responsive" class to navbar when the user clicks on the hamburger */
        function toggle_responsive_navbar() {
            var x = document.getElementById("navbar");
            if (x.className.includes(" responsive")) {
                x.className = x.className.replace(" responsive", "");
            } else {
                x.className += " responsive";
            }
        }
    </script>
</head>

<body>
    <div class="fixed_header">
        <div id="navbar">
            <a id="navbar_brand" href="https://bestia.dev">
                <img src="bestia_icon.png" alt="Bestia development" title="bestia.dev" />
                <span id="navbar_title"> Bestia dev</span>
            </a>
            <a id="navbar_hamburger" href="javascript:void(0);" onclick="toggle_responsive_navbar()">☰ </a>
            <div id="navbar_topics">
                <a href="/index.html#home" onclick="toggle_responsive_navbar()">Home </a>
                <a href="/index.html#tutorials" onclick="toggle_responsive_navbar()">Tutorials</a>
                <a href="/index.html#games" onclick="toggle_responsive_navbar()">Games</a>
                <a href="/index.html#productivity" onclick="toggle_responsive_navbar()">Productivity</a>
                <a href="/index.html#contact" onclick="toggle_responsive_navbar()">Contact</a>
            </div>
        </div>
    </div>
    <div>&nbsp;</div> 
    <div class="small">This is a copy of the Github readme.<br/>
    Find the original on <a href="https://github.com/bestia-dev/QVS21">https://github.com/bestia-dev/QVS21</a></div>

<article class="markdown-body entry-content container-lg" itemprop="text">
<div class="markdown-heading" dir="auto"><h1 tabindex="-1" class="heading-element" dir="auto">QVS21</h1><a id="user-content-qvs21" class="anchor" aria-label="Permalink: QVS21" href="#qvs21"></a></div>
<p dir="auto"><strong>Modern replacement for csv for the year 2021</strong><br>
<em><strong>version: 0.0.8  date: 2021-07-16 author: <a href="https://bestia.dev" rel="nofollow">bestia.dev</a> repository: <a href="https://github.com/bestia-dev/QVS21">GitHub</a></strong></em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/73ed04c398eacfa6db03184d92a4980c9e5618bf6994b483ab49ab3d7e1969ee/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f776f726b5f696e5f70726f67726573732d79656c6c6f77"><img src="https://img.shields.io/badge/work_in_progress-yellow" alt="work_in_progress" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://github.com/bestia-dev/QVS21/"><img src="https://img.shields.io/badge/Lines_in_Rust-1574-green.svg" alt="Lines in Rust code" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/QVS21/"><img src="https://img.shields.io/badge/Lines_in_Doc_comments-612-blue.svg" alt="Lines in Doc comments" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/QVS21/"><img src="https://img.shields.io/badge/Lines_in_comments-211-purple.svg" alt="Lines in Comments" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/QVS21/"><img src="https://img.shields.io/badge/Lines_in_examples-954-yellow.svg" alt="Lines in examples" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/QVS21/"><img src="https://img.shields.io/badge/Lines_in_tests-812-orange.svg" alt="Lines in tests" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://crates.io/crates/qvs21" rel="nofollow"><img src="https://img.shields.io/crates/v/qvs21.svg" alt="crates.io" style="max-width: 100%;"></a>
<a href="https://docs.rs/qvs21/" rel="nofollow"><img src="https://docs.rs/qvs21/badge.svg" alt="Documentation" style="max-width: 100%;"></a>
<a href="https://web.crev.dev/rust-reviews/crate/qvs21/" rel="nofollow"><img src="https://web.crev.dev/rust-reviews/badge/crev_count/qvs21.svg" alt="crev reviews" style="max-width: 100%;"></a>
<a href="https://lib.rs/crates/qvs21/" rel="nofollow"><img src="https://img.shields.io/badge/Lib.rs-rust-orange.svg" alt="Lib.rs" style="max-width: 100%;"></a>
<a href="https://github.com/bestia-dev/qvs21/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License" style="max-width: 100%;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/1fb75e9ef0a7ab61b9d2bb3dc463dad11ee7442c726cad1338c71733c06aa7d1/68747470733a2f2f6265737469612e6465762f776562706167655f6869745f636f756e7465722f6765745f7376675f696d6167652f3633313239383438392e737667"><img src="https://bestia.dev/webpage_hit_counter/get_svg_image/631298489.svg" alt="QVS21" style="max-width: 100%;"></a></p>
<p dir="auto">Hashtags: #rustlang #tutorial
My projects on Github are more like a tutorial than a finished product: <a href="https://github.com/bestia-dev/tutorials_rust_wasm">bestia-dev tutorials</a>.</p>
<p dir="auto">My proposed format for import/export of 2 dimensional database tables.</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Difference between QVS20 and QVS21</h2><a id="user-content-difference-between-qvs20-and-qvs21" class="anchor" aria-label="Permalink: Difference between QVS20 and QVS21" href="#difference-between-qvs20-and-qvs21"></a></div>
<p dir="auto"><code>QVS</code> stands for "sQuare brackets Separated Values".<br>
The number <code>20</code> is the year of the first version: 2020.<br>
The number <code>21</code> is the year of the second version: 2021.
The second version has everything from the first version plus added support for SubTables.<br>
It is not an update, but a more complex version.<br>
For most projects it is enough to use the QVS2020. The code is smaller, faster, simpler.<br>
Only if there is absolute need for SubTables the QVS21 must be used.<br>
Except for SubTables these versions are 100% compatible.<br>
Find the repository for QVS20 here: <a href="https://github.com/bestia-dev/QVS20">https://github.com/bestia-dev/QVS20</a>.</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Data type SubTable</h2><a id="user-content-data-type-subtable" class="anchor" aria-label="Permalink: Data type SubTable" href="#data-type-subtable"></a></div>
<p dir="auto">Inside one cell of the table is possible to insert a whole sub-table.<br>
Just like that. Nothing changes, no special escaping, because we have start and end delimiters.<br>
So we can represent also hierarchical data, if it is really needed.<br>
Still the primary goal of the standard is tabular data.<br>
Yes, but one tiny thing must change: the row delimiter of the sub-table is not \n anymore.<br>
It is the number that represent the depth of the sub-table: 1, 2, 3,...<br>
It must be only one byte. This format is not really great for hierarchies deeper than 9 levels.</p>
<p dir="auto">Example of CountryTable:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[Country][Population]  
[Slovenia][2000000]  
[Italia][60000000]  
[Croatia][4000000]  "><pre lang="QVS21" class="notranslate"><code>[Country][Population]  
[Slovenia][2000000]  
[Italia][60000000]  
[Croatia][4000000]  
</code></pre></div>
<p dir="auto">Now we want to insert the data of the cities, but hierarchically as a sub-table.<br>
Example of CityDataTable for Slovenia:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[City][MetropolitanPopulation]  
[Ljubljana][300000]  
[Koper][30000]  "><pre lang="QVS21" class="notranslate"><code>[City][MetropolitanPopulation]  
[Ljubljana][300000]  
[Koper][30000]  
</code></pre></div>
<p dir="auto">Together table and sub-table looks like this:<br>
The sub-table row delimiter is changed to "1".<br>
For easy parsing, the sub-table starts with the new row delimiter.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[Country][CityDataSubTable][Population]  
[Slovenia][1[Ljubljana][300000]1[Koper][30000]1][2000000]  
[Italia][1[Milano][400000]1[Venezia][30000]1][60000]  "><pre lang="QVS21" class="notranslate"><code>[Country][CityDataSubTable][Population]  
[Slovenia][1[Ljubljana][300000]1[Koper][30000]1][2000000]  
[Italia][1[Milano][400000]1[Venezia][30000]1][60000]  
</code></pre></div>
<p dir="auto">This is not very human readable, because the lack of spaces.<br>
But you can visualize it like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="[Country ] [CityDataSubTable      ] [Population]  
[Slovenia] [1[Ljubljana][300000]1  
             [Koper    ][ 30000]1 ] [   2000000]  
[Italia  ] [1[Milano   ][400000]1  
             [Venezia  ][ 30000]1 ] [  60000000]  
...  "><pre lang="QVS21" class="notranslate"><code>[Country ] [CityDataSubTable      ] [Population]  
[Slovenia] [1[Ljubljana][300000]1  
             [Koper    ][ 30000]1 ] [   2000000]  
[Italia  ] [1[Milano   ][400000]1  
             [Venezia  ][ 30000]1 ] [  60000000]  
...  
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Row delimiter LF and sub-tables</h2><a id="user-content-row-delimiter-lf-and-sub-tables" class="anchor" aria-label="Permalink: Row delimiter LF and sub-tables" href="#row-delimiter-lf-and-sub-tables"></a></div>
<p dir="auto">The basic row delimiter is LF. Not CR, not CRLF, but exactly LF.<br>
Every row must end with the row delimiter, especially the last row .<br>
There is a small performance problem with sub-tables here.<br>
Let me explain and come to the solution with this flow of thoughts.<br>
For sequential reading of <code>QVS21</code> files the inserted sub-tables are not a problem. It works well.<br>
If we read every field sequentially, we know when the sub-table starts and ends. Easy.
But sometimes we want to go very fast line by line and read only the first field for filtering. Because of sub-tables, the next LF is not always the start of a new row.<br>
<strong>Let's solve this problem.</strong><br>
We can use again the fact that we know the different start and end delimiters.<br>
So between the end field and the new row we can put a different <code>row delimiter</code>.<br>
The first level row delimiter is conveniently LF.<br>
For the first sub-table the row delimiter changes to the string <code>1</code>.<br>
For the next depth level <code>2</code> and so on. The number is the depth of the sub-table.<br>
In any moment it will be clear what is the row delimiter for that explicit sub-table.<br>
Very important rule: every row, and the last row especially, must end with a row delimiter !<br>
We must take care to limit the row delimiter to only one byte. It means there cannot be a sub-table nested deeper than 9 levels.  And that is fine for this type of tabular format.</p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto">Schema 3rd row - Sub table schemas</h3><a id="user-content-schema-3rd-row---sub-table-schemas" class="anchor" aria-label="Permalink: Schema 3rd row - Sub table schemas" href="#schema-3rd-row---sub-table-schemas"></a></div>
<p dir="auto">SubTables schemas are write in the 3rd row.<br>
For other column, the field is empty [].</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">File extension</h2><a id="user-content-file-extension" class="anchor" aria-label="Permalink: File extension" href="#file-extension"></a></div>
<p dir="auto">I want the file extension to be specific for the version of the standard.<br>
File extension and standard name are the same: <code>*.QVS21</code></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Read also the separate XXX.md files</h2><a id="user-content-read-also-the-separate-xxxmd-files" class="anchor" aria-label="Permalink: Read also the separate XXX.md files" href="#read-also-the-separate-xxxmd-files"></a></div>
<p dir="auto">I use the same README.md file for GitHub, Crates.io and docs.rs.<br>
So I cannot include the specific information that are not common to all 3 purposes. For that reason I have separate XXX.md files:</p>
<ul dir="auto">
<li>DEVELOPMENT.md - information and instruction for development</li>
<li>CHANGELOG.md - what changed between versions</li>
<li>TODO.md - reminder of what is in plan to do</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto">Open-source and free as a beer</h2><a id="user-content-open-source-and-free-as-a-beer" class="anchor" aria-label="Permalink: Open-source and free as a beer" href="#open-source-and-free-as-a-beer"></a></div>
<p dir="auto">My open-source projects are free as a beer (MIT license).<br>
I just love programming.<br>
But I need also to drink. If you find my projects and tutorials helpful, please buy me a beer by donating to my <a href="https://paypal.me/LucianoBestia" rel="nofollow">PayPal</a>.<br>
You know the price of a beer in your local bar ;-)<br>
So I can drink a free beer for your health :-)<br>
<a href="https://translate.google.com/?hl=en&amp;sl=sl&amp;tl=en&amp;text=Na%20zdravje&amp;op=translate" rel="nofollow">Na zdravje!</a> <a href="https://dictionary.cambridge.org/dictionary/italian-english/alla-salute" rel="nofollow">Alla salute!</a> <a href="https://dictionary.cambridge.org/dictionary/german-english/prost" rel="nofollow">Prost!</a> <a href="https://matadornetwork.com/nights/how-to-say-cheers-in-50-languages/" rel="nofollow">Nazdravlje!</a> 🍻</p>
<p dir="auto"><a href="https://bestia.dev" rel="nofollow">//bestia.dev</a><br>
<a href="https://github.com/bestia-dev">//github.com/bestia-dev</a><br>
<a href="https://bestiadev.substack.com" rel="nofollow">//bestiadev.substack.com</a><br>
<a href="https://youtube.com/@bestia-dev-tutorials" rel="nofollow">//youtube.com/@bestia-dev-tutorials</a></p>
</article>
</body>

</html>